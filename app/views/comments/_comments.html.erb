<h2><%= Comment.model_name.human %></h2>

<table>
  <tbody>
  <% @comments.each do |comment| %>
    <tr>
      <td><%= comment.content %></td>
      <% if User.find(comment.user_id).name.empty? %>
        <td><%= User.find(comment.user_id).email %></td>
      <% else %>
        <td><%= User.find(comment.user_id).name %></td>
      <% end %>
      <td><%= comment.created_at.strftime('%Y/%-m/%-d %-H:%M') %></td>
      <% if User.find(comment.user_id) == current_user %>
        <td><%= link_to t('views.common.destroy'), [@commentable, comment],  method: :delete, data: { confirm: t('views.common.delete_confirm') } %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<%= form_with(model: [@commentable, @comment], method: :post) do |form| %>
  <div class="field">
    <%= form.text_area :content %>
  </div>

  <div class="actions">
    <%= form.submit t('controllers.common.comment') %>
  </div>
<% end %>